(function(t,i){if(!i._benSetupCore){i._benSetupCore=!0;var e={extend:function(){t.extend.apply(this,arguments)},setCookie:function(t,i,e,a){var n=t+"="+escape(i);if(e){var o=new Date;o.setTime(o.getTime()+e),n+="; expires="+o.toGMTString()}a&&(n+="; domain="+a),document.cookie=n},getCookie:function(t){var i,e=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return i=document.cookie.match(e),i?unescape(i[2]):null},isIPad:navigator.userAgent.indexOf("iPad")>-1},a=!1,n=/xyz/.test(function(){xyz})?/\bbase\b/:/.*/,o=function(){};o.extend=function(t,i){function o(){!a&&this.init&&this.init.apply(this,arguments)}if(2==arguments.length){var r=t.split("")[0];if(r.toUpperCase()!=r)throw new Error("Class must begin with Uppercase letters:"+t);return void(e[t]=this.extend(i))}var s=this.prototype,i=arguments[0];a=!0;var h=new this;a=!1;for(var m in i)h[m]="function"==typeof i[m]&&"function"==typeof s[m]&&n.test(i[m])?function(t,i){return function(){var e=this.base;this.base=s[t];var a=i.apply(this,arguments);return this.base=e,a}}(m,i[m]):i[m];return o.prototype=h,o.prototype.constructor=o,o.extend=arguments.callee,o},e.Class=o,i.ue=e}})(jQuery,this),function(t,i){Object.prototype.toString;t.fn.findUI=function(t,i){var e="[data-ui-"+t;return i&&(e+='="'+i+'"'),e+="]",this.find(e)},t.findUI=function(i,e){var a="[data-ui-"+i;return e&&(a+='="'+e+'"'),a+="]",t(a)},t.fn.findMark=function(t){var i='[data-ui-mark="'+t+'"]';return this.find(i)},t.fn.uiData=function(t){return this.attr("data-ui-"+t)};i.extend({processAll:function(e){t(e).find("[data-ui-control]").each(function(){var e=t(this),a=e.attr("data-ui-control");a&&i[a]&&(i.controlInstance[a]=i.controlInstance[a]||[],i.controlInstance[a].push(new i[a](this)))})},controlInstance:{}}),i.Class.extend("UI",{initMark:function(){var i=this;this.mark={},this.box&&this.box.findUI("mark").each(function(){var e=t(this).uiData("mark");i.mark[e]=i.mark[e]?i.mark[e].add(this):t(this)})},init:function(){var i,e=el_options={};if(arguments[1])i=arguments[0],e=arguments[1];else{var a=t.isPlainObject(arguments[0]);a?e=arguments[0]:i=arguments[0]}i&&(this.box=t(i)),this.opt=t.extend({},e,el_options)}})}(jQuery,ue),function(t,e){t.fn.farmerSlide=function(t){this.each(function(i,a){new e.Slide(a,t)})};var a=!!window.ActiveXObject,n=a&&!window.XMLHttpRequest;e.UI.extend("Slide",{init:function(i,a){this.base(i,a),this.opt=t.extend({},e.Slide.defaultOptions,this.opt),this.currentIndex=0,this.isAnimating=!1,this.box.findMark("imageContainer")[0]||this.box.append(this.opt.template),this.opt.boxWidth=365,this.opt.boxHeight=395,this.initMark(),this.setup()},setup:function(){var i=this;i.mark.imageContainer.width(i.opt.boxWidth).height(i.opt.boxHeight),i.mark.data&&i.mark.data.hide(),i.loadData(),i.initThumbs(),i.start(),i.mark.loading&&!i.data[0].img&&i.mark.loading.hide(),t(new Image).load(function(){i.data[0].loaded=!0,i.preDownLoadImage.call(i)}).attr("src",i.data[0].img)},add:function(t){var i=this.data.index;this.data.push({img:t.image,thumbImg:t.thumb,link:t.link,index:i,title:"",desc:"",setlink:!0}),this.total=this.data.length,this.mark.length.text(this.total),this.needResetThumb=!0},loadData:function(){var i=this;i.data=[],i.mark.data?i.mark.data.find("li").each(function(){var e=t(this),a={},n=e.findUI("data","img"),o=(n.uiData("slide-animate"),e.findUI("data","thumb")),r=e.findUI("data","desc"),s=e.findUI("data","link"),h=e.findUI("data","title");o=o||n,a.img=n.attr("data-src")||n.attr("src"),a.thumbImg=o.attr("data-src")||o.attr("src"),a.desc=r.text()||"",a.title=h.text()||"",a.link=s.attr("href")||"",a.index=i.data.length,a.setlink=s.uiData("setlink"),i.data.push(a)}):i.opt.data&&(i.data=i.opt.data),i.randomShow&&i.data.sort(function(t,i){return Math.random()-.5}),i.total=i.data.length,i.mark.length.text(i.total)},preDownLoadImage:function(){var i=this,e=new Image;t.each(i.data,function(a,n){t(e).load(function(){i.data[a].loaded=!0}).attr("src",this.img)})},pushData:function(){},start:function(){var t=this;t.setCurrentImage(),t.bindAction(),t.autoToggle()},_setCurrentImage:function(t,i){var e=this,a=e.data[t];e.mark.loading&&e.mark.loading.hide(),e.mark.img.attr("src",a.img),e.mark.title&&e.mark.title.text(a.title),e.mark.desc&&e.mark.desc.text(a.desc),e.mark.link&&(a.setlink?e.mark.link.removeClass("setlink-close"):e.mark.link.addClass("setlink-close"),e.mark.link.attr("href",a.link),e.mark.title&&e.mark.title.attr("href",a.link),e.mark.desc&&e.mark.desc.attr("href",a.link)),e.onPageLoaded(t),i&&i()},setCurrentImage:function(i,e){var a=this;i=void 0===i?a.currentIndex:i,a.currentIndex=i;var n=a.data[i];n.loaded?a._setCurrentImage(i,e):(a.mark.loading&&a.mark.loading.show(),t(new Image).load(function(){n.loaded=!0,a._setCurrentImage(i,e)}).attr("src",n.img))},autoToggle:function(){var t=this;t.opt.autoPlay&&(t.thumbDirect="right",t.clearTimer(),t.timer=setTimeout(function(){t.isAuto=!0,t.nextPage()},t.opt.interval))},initThumbs:function(){var i=this,e="";t.each(i.data,function(t,a){e+=i.getThumbItem(t)}),i.mark.thumbs.empty(),i.mark.thumbs.append(e);var a=i.mark.thumbs.find(".focus-thumb-item");i.thumbItemWidth=a.outerWidth(!0),i.totalVisableThumb=Math.ceil(i.mark.thumbsbox.innerWidth()/i.thumbItemWidth),i.noRepeat=i.totalVisableThumb>=i.total,i.noRepeat||(i.mark.thumbsClone=i.mark.thumbs.clone(),i.mark.thumbs.after(i.mark.thumbsClone)),i.getThumbGrid()},getThumbGrid:function(){var i=this;t(".focus-thumb-grid").remove(),i.mark.thumbGrid=t('<div class="focus-thumb-grid"></div>'),i.mark.thumbsbox.append(i.mark.thumbGrid)},getThumbItem:function(t){var i=this,e=i.data[t],a='<p class="focus-thumb-item" data-ui-thumb-item><a href="javascript://"><img data-ui-rel="'+t+'" src="'+e.thumbImg+'"/></a></p>';return a},onThumbAniFinish:function(t){var i=this;i.mark.index.text(t+1);var e=i.mark.thumbs.find(".focus-thumb-item:eq("+t+")");if(e.addClass("current"),i.noRepeat||(e=i.mark.thumbsClone.find(".focus-thumb-item:eq("+t+")"),e.addClass("current")),i.autoToggle(),i.isAnimating=!1,this.needResetThumb){this.needResetThumb=!1;var a=this.getThumbItem(this.total-1);this.mark.thumbs.append(a),this.mark.thumbsClone.append(a)}},setCurrentThumb:function(t){this.isAnimating=!0;var i=this,t=parseInt(t),e=parseInt(i.mark.thumbs.css("marginLeft")),a=-t*i.thumbItemWidth,n=Math.abs(e/i.thumbItemWidth);if(!i.isAuto)for(var o=0;o<i.totalVisableThumb;o++){var r=(1*n+o)%i.total;if(t===r){var s=parseInt(i.mark.thumbGrid.css("left")),h=o*i.thumbItemWidth;return s!=h&&i.mark.thumbGrid.animate({left:h},i.opt.thumbAniInterval,""),i.box.find(".focus-thumb-item").removeClass("current"),void i.onThumbAniFinish.call(i,t)}}if(e!=a){if("right"==i.thumbDirect){var m=-i.total*i.thumbItemWidth;e==m&&(i.mark.thumbs.css("margin-left",0),e=a=0),a=e-i.thumbItemWidth}else"left"==i.thumbDirect&&(t===i.total-1&&(e=-i.total*i.thumbItemWidth,i.mark.thumbs.css("margin-left",e)),a=e+i.thumbItemWidth);i.box.find(".focus-thumb-item").removeClass("current"),i.mark.thumbs.animate({"margin-left":a},i.thumbAniInterval,"",function(){i.onThumbAniFinish.call(i,t)})}else i.onThumbAniFinish(t)},onPageLoaded:function(t){this.setCurrentThumb(t)},goToPage:function(t){var i=this;if(t>=0&&!i.isAnimating&&t<i.total){var e=i.data[i.currentIndex],a=e.aniType||i.opt.defaultAni;i.opt.fuckIe6&&n&&(a="");var o=i.currentIndex;i.setCurrentImage(t,function(){i.animateLists[a]&&(i.box.find(".ben-slide-clonebox").remove(),i.animateLists[a].call(i,o,t))})}},nextPage:function(){var t=this,i=1*t.currentIndex+1;i>=t.total&&(i=0),t.goToPage(i)},prevPage:function(){var t=this,i=t.currentIndex-1;i<0&&(i=t.total-1),t.goToPage(i)},getBoxClone:function(i){var e=this.data[i],a=t('<div class="ben-slide-clonebox"><a href="'+e.link+'" target="_blank"><img src="'+e.img+'" /></a></div>');return a},appendBoxClone:function(t){this.mark.imageContainer.append(t)},onAnimateBegin:function(t,i){var e=this;e.clearTimer()},onAnimateFinish:function(t,i){var e=this;e.box.find(".ben-slide-clonebox").remove(),e.autoToggle()},clearTimer:function(){clearTimeout(this.timer),clearTimeout(this.thumbTimer)},bindAction:function(){var i=this;i.mark.next&&i.mark.next.click(function(){i.isAuto=!1,i.thumbDirect="right",i.nextPage()}),i.mark.prev&&i.mark.prev.click(function(){i.isAuto=!1,i.thumbDirect="left",i.prevPage()}),i.mark.thumbs&&i.mark.thumbsbox.click(function(e){var a=t(e.target).uiData("rel");void 0!==a&&null!==a&&(i.thumbDirect="right",i.isAuto=!1,i.goToPage(a))}),i.mark.imageContainer.hover(function(){clearTimeout(i.timer)},function(){i.autoToggle()})},animateLists:{random:function(t,i){var e=["slideRight","slideLeft","lineRight","lineTop","lineLeft","lineBottom","fadeIn"],a=Math.floor(7*Math.random());this.animateLists[e[a]].call(this,t,i)},slideLeft:function(t,i){this.animateLists.line.call(this,t,i,{direction:"left",total:1})},slideRight:function(t,i){this.animateLists.line.call(this,t,i,{direction:"right",total:1})},lineRight:function(t,i){this.animateLists.line.call(this,t,i,{direction:"right",total:1})},lineTop:function(t,i){this.animateLists.line.call(this,t,i,{direction:"top",total:10})},lineLeft:function(t,i){this.animateLists.line.call(this,t,i,{direction:"left",total:10})},lineBottom:function(t,i){this.animateLists.line.call(this,t,i,{direction:"bottom",total:10})},line:function(e,a,n){var o=this,r=o.opt.boxWidth,s=o.opt.boxHeight;o.data[e].img,o.data[a].img;o.onAnimateBegin(e,a);var n=t.extend({},{direction:"top",delayType:"quence",total:5},n||{}),h=this.opt.easing?this.opt.easing:"",m=1200/o.opt.animateSpeed,u=n.total;for(i=0;i<u;i++){switch(n.direction){case"right":var d=r,l=Math.ceil(s/u),c=l*i,f=0,b=c,g=d,p=c,k=-g,v=c,x=0,I=-c,T=0;break;case"top":var d=Math.ceil(this.opt.boxWidth/u),l=this.opt.boxHeight,c=0,f=d*i,b=-l,g=f,p=l,k=f,v=0,x=f,I=0,T=-f;break;case"left":var d=this.opt.boxWidth,l=Math.ceil(this.opt.boxHeight/u),c=l*i,f=0,b=c,g=-d,p=c,k=-g,v=c,x=0,I=-c,T=0;break;case"bottom":var d=Math.ceil(this.opt.boxWidth/u),l=this.opt.boxHeight,c=0,f=d*i,b=l,g=f,p=-l,k=f,v=0,x=f,I=0,T=-f}switch(n.delayType){case"zebra":default:var C=i%2==0?0:150;break;case"random":var C=30*(30*Math.random());break;case"quence":var C=100*i}var w=o.getBoxClone(e);w.find("img").css({left:T,top:I}),w.css({top:c,left:f,width:d,height:l}),o.appendBoxClone(w),w.show(),w.delay(C).animate({top:b,left:g},m,h);var A=o.getBoxClone(a);A.find("img").css({left:T,top:I}),A.css({top:p,left:k,width:d,height:l}),o.appendBoxClone(A),A.show();var y=i==u-1?function(){o.onAnimateFinish(e,a)}:"";A.delay(C).animate({top:v,left:x},m,h,y)}},fadeIn:function(t,i){var e=this,a=e.opt.boxWidth,n=e.opt.boxHeight;e.data[t].img,e.data[i].img;e.onAnimateBegin(t,i);var o=e.getBoxClone(t);o.css({top:0,left:0,width:a,height:n}),e.appendBoxClone(o),o.show(),o.fadeOut(1e3,function(){e.onAnimateFinish(t,i)})}}}),e.Slide.defaultOptions={data:null,fuckIe6:!1,randomShow:!1,autoPlay:!0,animateSpeed:1.5,defaultAni:"fadeIn",thumbAniInterval:200,interval:2500}}(jQuery,ue);